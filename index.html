<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sophie Agent - Your Task Management Partner</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    
    <!-- React and ReactDOM -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
    
    <style>
        body {
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <!-- Root element for React -->
    <div id="root"></div>

    <!-- React Component -->
    <script type="text/babel">
        // Import required icons from Lucide
        const { MessageCircle, Calendar, CheckSquare, Star, Plus } = lucide;

        // Card components
        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-lg shadow ${className}`}>
                {children}
            </div>
        );

        const CardHeader = ({ children }) => (
            <div className="px-6 py-4 border-b">
                {children}
            </div>
        );

        const CardTitle = ({ children, className = "" }) => (
            <h2 className={`text-xl font-semibold ${className}`}>
                {children}
            </h2>
        );

        const CardContent = ({ children }) => (
            <div className="p-6">
                {children}
            </div>
        );

        // Sophie Agent Component
        const SophieAgent = () => {
            const [tasks, setTasks] = React.useState([]);
            const [newTask, setNewTask] = React.useState('');
            const [priority, setPriority] = React.useState('medium');
            const [dueDate, setDueDate] = React.useState('');
            const [messages, setMessages] = React.useState([
                {
                    text: "Hi! I'm Sophie, and I'm here to help you stay organized. Let's start with your tasks - just tell me about them along with how important they are and when they're due!",
                    sender: 'sophie'
                }
            ]);

            const handleAddTask = (e) => {
                e.preventDefault();
                if (newTask.trim() !== '') {
                    const task = {
                        id: Date.now(),
                        text: newTask,
                        priority,
                        dueDate,
                        completed: false
                    };
                    setTasks([...tasks, task]);
                    setMessages([...messages, {
                        text: `Great! I've added "${newTask}" to your tasks. Would you like to break this down into smaller steps or connect it to any of your existing tasks?`,
                        sender: 'sophie'
                    }]);
                    setNewTask('');
                    setPriority('medium');
                    setDueDate('');
                }
            };

            const toggleTask = (id) => {
                setTasks(tasks.map(task => 
                    task.id === id ? { ...task, completed: !task.completed } : task
                ));
                const task = tasks.find(t => t.id === id);
                if (task) {
                    setMessages([...messages, {
                        text: `${task.completed ? 'Unchecked' : 'Completed'} "${task.text}". ${!task.completed ? 'Great job! Would you like to move on to related tasks?' : ''}`,
                        sender: 'sophie'
                    }]);
                }
            };

            return (
                <div className="max-w-4xl mx-auto p-4 space-y-4">
                    <Card>
                        <CardHeader>
                            <CardTitle className="flex items-center gap-2">
                                <MessageCircle className="w-6 h-6 text-blue-500" />
                                Sophie Agent
                            </CardTitle>
                        </CardHeader>
                        <CardContent>
                            <div className="space-y-4">
                                {/* Messages */}
                                <div className="space-y-2 mb-4">
                                    {messages.map((message, index) => (
                                        <div
                                            key={index}
                                            className={`p-3 rounded-lg ${
                                                message.sender === 'sophie'
                                                    ? 'bg-blue-100 ml-auto max-w-[80%]'
                                                    : 'bg-gray-100 mr-auto max-w-[80%]'
                                            }`}
                                        >
                                            {message.text}
                                        </div>
                                    ))}
                                </div>

                                {/* Task Input Form */}
                                <form onSubmit={handleAddTask} className="space-y-2">
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={newTask}
                                            onChange={(e) => setNewTask(e.target.value)}
                                            placeholder="Enter a new task..."
                                            className="flex-1 p-2 border rounded"
                                        />
                                        <select
                                            value={priority}
                                            onChange={(e) => setPriority(e.target.value)}
                                            className="p-2 border rounded"
                                        >
                                            <option value="low">Low Priority</option>
                                            <option value="medium">Medium Priority</option>
                                            <option value="high">High Priority</option>
                                        </select>
                                        <input
                                            type="date"
                                            value={dueDate}
                                            onChange={(e) => setDueDate(e.target.value)}
                                            className="p-2 border rounded"
                                        />
                                        <button
                                            type="submit"
                                            className="p-2 bg-blue-500 text-white rounded hover:bg-blue-600"
                                        >
                                            <Plus className="w-5 h-5" />
                                        </button>
                                    </div>
                                </form>

                                {/* Task List */}
                                <div className="space-y-2">
                                    {tasks.map(task => (
                                        <div
                                            key={task.id}
                                            className="flex items-center gap-2 p-2 border rounded hover:bg-gray-50"
                                        >
                                            <button
                                                onClick={() => toggleTask(task.id)}
                                                className="p-1 hover:bg-gray-200 rounded"
                                            >
                                                <CheckSquare
                                                    className={`w-5 h-5 ${
                                                        task.completed ? 'text-green-500' : 'text-gray-400'
                                                    }`}
                                                />
                                            </button>
                                            <span className={task.completed ? 'line-through text-gray-500' : ''}>
                                                {task.text}
                                            </span>
                                            <Star
                                                className={`w-5 h-5 ${
                                                    task.priority === 'high'
                                                        ? 'text-red-500'
                                                        : task.priority === 'medium'
                                                        ? 'text-yellow-500'
                                                        : 'text-gray-300'
                                                }`}
                                            />
                                            <Calendar className="w-5 h-5 text-gray-400" />
                                            <span className="text-sm text-gray-500">{task.dueDate}</span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </CardContent>
                    </Card>
                </div>
            );
        };

        // Render the React component
        ReactDOM.render(
            <SophieAgent />,
            document.getElementById('root')
        );
    </script>
</body>
</html>